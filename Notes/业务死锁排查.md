

> 在业务中出现的报错警告，追根溯源为MySQL的update导致的死锁。


## 错误日志
```
show engine innodb status;

5.7.25-log

=====================================
2022-02-10 07:03:47 0x7fc9ef255700 INNODB MONITOR OUTPUT
=====================================
Per second averages calculated from the last 41 seconds
-----------------
BACKGROUND THREAD
-----------------
srv_master_thread loops: 2789622 srv_active, 0 srv_shutdown, 476077 srv_idle
srv_master_thread log flush and writes: 3265660
----------
SEMAPHORES
----------
OS WAIT ARRAY INFO: reservation count 33524
OS WAIT ARRAY INFO: signal count 49060
RW-shared spins 0, rounds 47320, OS waits 9139
RW-excl spins 0, rounds 272407, OS waits 1181
RW-sx spins 10306, rounds 206551, OS waits 2247
Spin rounds per wait: 47320.00 RW-shared, 272407.00 RW-excl, 20.04 RW-sx
------------------------
LATEST DETECTED DEADLOCK
------------------------
2022-02-10 02:53:12 0x7fc9ede7b700
*** (1) TRANSACTION:
TRANSACTION 102104997, ACTIVE 0 sec starting index read
mysql tables in use 3, locked 3
LOCK WAIT 4 lock struct(s), heap size 1136, 3 row lock(s)
MySQL thread id 409525, OS thread handle 140505266812672, query id 1792071459 59.111.198.100 artistmgr updating
update `artist_manage_data` set `manage_days` = '0', `manage_ratio` = '0.1' where `user_id` = 1725 and `period_id` = 82
*** (1) WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 37 page no 48 n bits 1192 index index_period_id of table `artistmgr`.`artist_manage_data` trx id 102104997 lock_mode X waiting
Record lock, heap no 215 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a00; asc     ;;

*** (2) TRANSACTION:
TRANSACTION 102104998, ACTIVE 0 sec fetching rows, thread declared inside InnoDB 4814
mysql tables in use 3, locked 3
29 lock struct(s), heap size 3520, 377 row lock(s)
MySQL thread id 409439, OS thread handle 140505256539904, query id 1792071515 59.111.198.100 artistmgr updating
update `artist_manage_data` set `manage_days` = '5.2', `manage_ratio` = '0.24' where `user_id` = 367 and `period_id` = 82
*** (2) HOLDS THE LOCK(S):
RECORD LOCKS space id 37 page no 48 n bits 1192 index index_period_id of table `artistmgr`.`artist_manage_data` trx id 102104998 lock_mode X
Record lock, heap no 215 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a00; asc     ;;

Record lock, heap no 216 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a01; asc     ;;

Record lock, heap no 217 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a02; asc     ;;

Record lock, heap no 218 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a03; asc     ;;

Record lock, heap no 219 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a04; asc     ;;

Record lock, heap no 220 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a05; asc     ;;

Record lock, heap no 221 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a06; asc     ;;

Record lock, heap no 222 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a07; asc     ;;

Record lock, heap no 223 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a08; asc     ;;

Record lock, heap no 224 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a09; asc     ;;

Record lock, heap no 225 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a0a; asc     ;;

Record lock, heap no 226 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a0b; asc     ;;

Record lock, heap no 227 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a0c; asc     ;;

Record lock, heap no 228 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a0d; asc     ;;

Record lock, heap no 229 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a0e; asc     ;;

Record lock, heap no 230 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a0f; asc     ;;

Record lock, heap no 231 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a10; asc     ;;

Record lock, heap no 232 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a11; asc     ;;

Record lock, heap no 233 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a12; asc     ;;

Record lock, heap no 234 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a13; asc     ;;

Record lock, heap no 235 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a14; asc     ;;

Record lock, heap no 236 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a15; asc     ;;

Record lock, heap no 237 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a16; asc     ;;

Record lock, heap no 238 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a17; asc     ;;

Record lock, heap no 239 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a18; asc     ;;

Record lock, heap no 240 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a19; asc     ;;

Record lock, heap no 241 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a1a; asc     ;;

Record lock, heap no 242 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a1b; asc     ;;

Record lock, heap no 243 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a1c; asc     ;;

Record lock, heap no 244 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a1d; asc     ;;

Record lock, heap no 245 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a1e; asc     ;;

Record lock, heap no 246 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a1f; asc     ;;

Record lock, heap no 247 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a20; asc     ;;

Record lock, heap no 248 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a21; asc    !;;

Record lock, heap no 249 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a22; asc    ";;

Record lock, heap no 250 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a23; asc    #;;

Record lock, heap no 251 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a24; asc    $;;

Record lock, heap no 252 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a25; asc    %;;

Record lock, heap no 253 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a26; asc    &;;

Record lock, heap no 254 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a27; asc    ';;

Record lock, heap no 255 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a28; asc    (;;

Record lock, heap no 256 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a29; asc    );;

Record lock, heap no 257 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a2a; asc    *;;

Record lock, heap no 258 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a2b; asc    +;;

Record lock, heap no 259 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a2c; asc    ,;;

Record lock, heap no 260 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a2d; asc    -;;

Record lock, heap no 261 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a2e; asc    .;;

Record lock, heap no 262 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a2f; asc    /;;

Record lock, heap no 263 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a30; asc    0;;

Record lock, heap no 264 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a31; asc    1;;

Record lock, heap no 265 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a32; asc    2;;

Record lock, heap no 266 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a33; asc    3;;

Record lock, heap no 267 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a34; asc    4;;

Record lock, heap no 268 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a35; asc    5;;

Record lock, heap no 269 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a36; asc    6;;

Record lock, heap no 270 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a37; asc    7;;

Record lock, heap no 271 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a38; asc    8;;

Record lock, heap no 272 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a39; asc    9;;

Record lock, heap no 273 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a3a; asc    :;;

Record lock, heap no 274 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a3b; asc    ;;;

Record lock, heap no 275 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a3c; asc    <;;

Record lock, heap no 276 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a3d; asc    =;;

Record lock, heap no 277 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a3e; asc    >;;

Record lock, heap no 278 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a3f; asc    ?;;

Record lock, heap no 279 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a40; asc    @;;

Record lock, heap no 280 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a41; asc    A;;

Record lock, heap no 281 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a42; asc    B;;

Record lock, heap no 282 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a43; asc    C;;

Record lock, heap no 283 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a44; asc    D;;

Record lock, heap no 284 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a45; asc    E;;

Record lock, heap no 285 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a46; asc    F;;

Record lock, heap no 286 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a47; asc    G;;

Record lock, heap no 287 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a48; asc    H;;

Record lock, heap no 288 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a49; asc    I;;

Record lock, heap no 289 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a4a; asc    J;;

Record lock, heap no 290 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a4b; asc    K;;

Record lock, heap no 291 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a4c; asc    L;;

Record lock, heap no 292 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a4d; asc    M;;

Record lock, heap no 293 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a4e; asc    N;;

Record lock, heap no 294 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a4f; asc    O;;

Record lock, heap no 295 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a50; asc    P;;

Record lock, heap no 296 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a51; asc    Q;;

Record lock, heap no 297 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a52; asc    R;;

Record lock, heap no 298 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a53; asc    S;;

Record lock, heap no 299 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a54; asc    T;;

Record lock, heap no 300 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a55; asc    U;;

Record lock, heap no 301 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a56; asc    V;;

Record lock, heap no 302 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a57; asc    W;;

Record lock, heap no 303 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a58; asc    X;;

Record lock, heap no 304 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a59; asc    Y;;

Record lock, heap no 305 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a5a; asc    Z;;

Record lock, heap no 306 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a5b; asc    [;;

Record lock, heap no 307 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a5c; asc    \;;

Record lock, heap no 308 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a5d; asc    ];;

Record lock, heap no 309 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a5e; asc    ^;;

Record lock, heap no 310 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a5f; asc    _;;

Record lock, heap no 311 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a60; asc    `;;

Record lock, heap no 312 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a61; asc    a;;

Record lock, heap no 313 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a62; asc    b;;

Record lock, heap no 314 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a63; asc    c;;

Record lock, heap no 315 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a64; asc    d;;

Record lock, heap no 316 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a65; asc    e;;

Record lock, heap no 317 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a66; asc    f;;

Record lock, heap no 318 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a67; asc    g;;

Record lock, heap no 319 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a68; asc    h;;

Record lock, heap no 320 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a69; asc    i;;

Record lock, heap no 321 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a6a; asc    j;;

Record lock, heap no 322 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a6b; asc    k;;

Record lock, heap no 323 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a6c; asc    l;;

Record lock, heap no 324 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a6d; asc    m;;

Record lock, heap no 325 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a6e; asc    n;;

Record lock, heap no 326 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a6f; asc    o;;

Record lock, heap no 327 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a70; asc    p;;

Record lock, heap no 328 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a71; asc    q;;

Record lock, heap no 329 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a72; asc    r;;

Record lock, heap no 330 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a73; asc    s;;

Record lock, heap no 331 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a74; asc    t;;

Record lock, heap no 332 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a75; asc    u;;

Record lock, heap no 333 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a76; asc    v;;

Record lock, heap no 334 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a77; asc    w;;

Record lock, heap no 335 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a78; asc    x;;

Record lock, heap no 336 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a79; asc    y;;

Record lock, heap no 337 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a7a; asc    z;;

Record lock, heap no 338 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a7b; asc    {;;

Record lock, heap no 339 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 4; hex 80000052; asc    R;;
 1: len 4; hex 00001a7c; asc    |;;

*** (2) WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 37 page no 50 n bits 344 index PRIMARY of table `artistmgr`.`artist_manage_data` trx id 102104998 lock_mode X locks rec but not gap waiting
Record lock, heap no 67 PHYSICAL RECORD: n_fields 9; compact format; info bits 0
 0: len 4; hex 00001a7c; asc    |;;
 1: len 6; hex 000005ef3ce2; asc     < ;;
 2: len 7; hex 470000017f1a78; asc G     x;;
 3: len 4; hex 800006bd; asc     ;;
 4: len 4; hex 80000052; asc    R;;
 5: len 8; hex 0000000000000000; asc         ;;
 6: len 8; hex 9a9999999999b93f; asc        ?;;
 7: len 4; hex 61d3ba11; asc a   ;;
 8: len 4; hex 61e9346a; asc a 4j;;

*** WE ROLL BACK TRANSACTION (1)
------------
TRANSACTIONS
------------
Trx id counter 102149349
Purge done for trx's n:o < 102141897 undo n:o < 0 state: running but idle
History list length 33
LIST OF TRANSACTIONS FOR EACH SESSION:
---TRANSACTION 422006587348640, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587355080, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587344040, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587337600, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587333000, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587327480, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587326560, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587323800, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587317360, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587314600, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587313680, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587310920, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587312760, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587307240, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587293440, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587306320, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587295280, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587291600, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587247440, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587290680, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587286080, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587282400, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587281480, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587241920, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587277800, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587283320, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587267680, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587288840, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587242840, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587276880, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587266760, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587275960, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587334840, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587404760, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587402920, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587401080, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587398320, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587392800, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587338520, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587273200, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587391880, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587359680, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587390040, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587386360, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587381760, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587380840, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587378080, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587372560, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587375320, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587374400, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587371640, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587369800, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587336680, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587354160, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587352320, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587368880, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587367960, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587261240, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587367040, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587365200, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587364280, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587362440, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587357840, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587339440, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587350480, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587349560, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587347720, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587346800, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587343120, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587341280, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587335760, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587340360, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587333920, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587332080, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587331160, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587329320, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587328400, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587321960, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587320120, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587318280, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587316440, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587272280, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587311840, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587310000, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587304480, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587303560, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587302640, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587301720, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587300800, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587299880, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587254800, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587298040, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587296200, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587294360, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587292520, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587287000, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587289760, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587268600, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587278720, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587275040, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587274120, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587270440, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587258480, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587257560, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587252960, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587263080, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587246520, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587253880, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587252040, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587250200, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587240080, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587244680, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587251120, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587264920, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587287920, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587269520, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587655920, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587508720, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587308160, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587298960, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587279640, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587619120, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587271360, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587309080, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587655000, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587585080, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587538160, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587470080, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587647640, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587462720, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587454440, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587412120, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587319200, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587642120, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587608080, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587607160, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587606240, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587605320, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587604400, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587603480, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587241000, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587598880, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587597040, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587596120, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587595200, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587594280, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587593360, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587592440, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587591520, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587587840, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587586920, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587586000, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587584160, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587583240, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587580480, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587578640, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587575880, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587574040, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587358760, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587573120, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587572200, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587571280, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587570360, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587569440, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587542760, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587568520, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587564840, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587563920, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587517000, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587515160, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587505040, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587504120, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587502280, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587493080, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587491240, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587490320, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587489400, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587488480, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587484800, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587394640, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587475600, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587472840, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587456280, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587446160, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587444320, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587441560, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587440640, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587439720, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587438800, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587416720, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587397400, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587393720, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587390960, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587389120, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587388200, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587387280, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587385440, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587379920, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587379000, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587321040, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587297120, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587285160, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587280560, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587265840, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587255720, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587260320, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587256640, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587239160, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587249280, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587259400, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587243760, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587565760, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587413960, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587360600, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587315520, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587941120, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587919960, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587918120, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587853720, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587885000, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587870280, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587866600, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587857400, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587835320, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587818760, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587816000, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587815080, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587813240, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587798520, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587797600, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587795760, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587794840, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587770000, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587769080, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587764480, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587737800, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587714800, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587614520, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587707440, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587624640, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587677080, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587676160, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587675240, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587670640, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587588760, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587627400, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587582320, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587581400, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587579560, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587574960, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587330240, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587527120, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587500440, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587499520, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587445240, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587432360, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587428680, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587399240, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587396480, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587345880, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587324720, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587262160, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587284240, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587395560, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587248360, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587494000, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587361520, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587448920, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587342200, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587477440, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587422240, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587264000, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587238240, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587403840, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587325640, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587322880, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587305400, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587519760, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587382680, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587436040, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587426840, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587384520, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 422006587383600, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
--------
FILE I/O
--------
I/O thread 0 state: waiting for completed aio requests (insert buffer thread)
I/O thread 1 state: waiting for completed aio requests (log thread)
I/O thread 2 state: waiting for completed aio requests (read thread)
I/O thread 3 state: waiting for completed aio requests (read thread)
I/O thread 4 state: waiting for completed aio requests (read thread)
I/O thread 5 state: waiting for completed aio requests (read thread)
I/O thread 6 state: waiting for completed aio requests (write thread)
I/O thread 7 state: waiting for completed aio requests (write thread)
I/O thread 8 state: waiting for completed aio requests (write thread)
I/O thread 9 state: waiting for completed aio requests (write thread)
Pending normal aio reads: [0, 0, 0, 0] , aio writes: [0, 0, 0, 0] ,
 ibuf aio reads:, log i/o's:, sync i/o's:
Pending flushes (fsync) log: 0; buffer pool: 0
18009 OS file reads, 439542 OS file writes, 116255 OS fsyncs
0.00 reads/s, 0 avg bytes/read, 0.00 writes/s, 0.00 fsyncs/s
-------------------------------------
INSERT BUFFER AND ADAPTIVE HASH INDEX
-------------------------------------
Ibuf: size 1, free list len 0, seg size 2, 57 merges
merged operations:
 insert 165, delete mark 45, delete 6
discarded operations:
 insert 0, delete mark 0, delete 0
Hash table size 1106407, node heap has 40 buffer(s)
Hash table size 1106407, node heap has 1493 buffer(s)
Hash table size 1106407, node heap has 102 buffer(s)
Hash table size 1106407, node heap has 511 buffer(s)
Hash table size 1106407, node heap has 199 buffer(s)
Hash table size 1106407, node heap has 103 buffer(s)
Hash table size 1106407, node heap has 36 buffer(s)
Hash table size 1106407, node heap has 3 buffer(s)
1890.30 hash searches/s, 944.98 non-hash searches/s
---
LOG
---
Log sequence number 2386480068
Log flushed up to   2386480068
Pages flushed up to 2386480048
Last checkpoint at  2386480039
0 pending log flushes, 0 pending chkp writes
295173 log i/o's done, 0.00 log i/o's/second
----------------------
BUFFER POOL AND MEMORY
----------------------
Total large memory allocated 4397727744
Dictionary memory allocated 636309
Buffer pool size   262144
Free buffers       240425
Database pages     19232
Old database pages 7050
Modified db pages  1
Pending reads      0
Pending writes: LRU 0, flush list 0, single page 0
Pages made young 158, not young 0
0.00 youngs/s, 0.00 non-youngs/s
Pages read 17766, created 1466, written 124388
0.00 reads/s, 0.00 creates/s, 0.00 writes/s
Buffer pool hit rate 1000 / 1000, young-making rate 0 / 1000 not 0 / 1000
Pages read ahead 0.00/s, evicted without access 0.00/s, Random read ahead 0.00/s
LRU len: 19232, unzip_LRU len: 0
I/O sum[0]:cur[0], unzip sum[0]:cur[0]
----------------------
INDIVIDUAL BUFFER POOL INFO
----------------------
---BUFFER POOL 0
Buffer pool size   32768
Free buffers       29910
Database pages     2532
Old database pages 914
Modified db pages  1
Pending reads      0
Pending writes: LRU 0, flush list 0, single page 0
Pages made young 19, not young 0
0.00 youngs/s, 0.00 non-youngs/s
Pages read 2382, created 150, written 14874
0.00 reads/s, 0.00 creates/s, 0.00 writes/s
Buffer pool hit rate 1000 / 1000, young-making rate 0 / 1000 not 0 / 1000
Pages read ahead 0.00/s, evicted without access 0.00/s, Random read ahead 0.00/s
LRU len: 2532, unzip_LRU len: 0
I/O sum[0]:cur[0], unzip sum[0]:cur[0]
---BUFFER POOL 1
Buffer pool size   32768
Free buffers       30194
Database pages     2266
Old database pages 840
Modified db pages  0
Pending reads      0
Pending writes: LRU 0, flush list 0, single page 0
Pages made young 21, not young 0
0.00 youngs/s, 0.00 non-youngs/s
Pages read 2133, created 133, written 5307
0.00 reads/s, 0.00 creates/s, 0.00 writes/s
Buffer pool hit rate 1000 / 1000, young-making rate 0 / 1000 not 0 / 1000
Pages read ahead 0.00/s, evicted without access 0.00/s, Random read ahead 0.00/s
LRU len: 2266, unzip_LRU len: 0
I/O sum[0]:cur[0], unzip sum[0]:cur[0]
---BUFFER POOL 2
Buffer pool size   32768
Free buffers       30168
Database pages     2308
Old database pages 834
Modified db pages  0
Pending reads      0
Pending writes: LRU 0, flush list 0, single page 0
Pages made young 23, not young 0
0.00 youngs/s, 0.00 non-youngs/s
Pages read 2146, created 162, written 6900
0.00 reads/s, 0.00 creates/s, 0.00 writes/s
Buffer pool hit rate 1000 / 1000, young-making rate 0 / 1000 not 0 / 1000
Pages read ahead 0.00/s, evicted without access 0.00/s, Random read ahead 0.00/s
LRU len: 2308, unzip_LRU len: 0
I/O sum[0]:cur[0], unzip sum[0]:cur[0]
---BUFFER POOL 3
Buffer pool size   32768
Free buffers       29913
Database pages     2562
Old database pages 958
Modified db pages  0
Pending reads      0
Pending writes: LRU 0, flush list 0, single page 0
Pages made young 18, not young 0
0.00 youngs/s, 0.00 non-youngs/s
Pages read 2464, created 98, written 15363
0.00 reads/s, 0.00 creates/s, 0.00 writes/s
Buffer pool hit rate 1000 / 1000, young-making rate 0 / 1000 not 0 / 1000
Pages read ahead 0.00/s, evicted without access 0.00/s, Random read ahead 0.00/s
LRU len: 2562, unzip_LRU len: 0
I/O sum[0]:cur[0], unzip sum[0]:cur[0]
---BUFFER POOL 4
Buffer pool size   32768
Free buffers       29752
Database pages     2672
Old database pages 969
Modified db pages  0
Pending reads      0
Pending writes: LRU 0, flush list 0, single page 0
Pages made young 15, not young 0
0.00 youngs/s, 0.00 non-youngs/s
Pages read 2330, created 342, written 20796
0.00 reads/s, 0.00 creates/s, 0.00 writes/s
Buffer pool hit rate 1000 / 1000, young-making rate 0 / 1000 not 0 / 1000
Pages read ahead 0.00/s, evicted without access 0.00/s, Random read ahead 0.00/s
LRU len: 2672, unzip_LRU len: 0
I/O sum[0]:cur[0], unzip sum[0]:cur[0]
---BUFFER POOL 5
Buffer pool size   32768
Free buffers       30377
Database pages     2089
Old database pages 766
Modified db pages  0
Pending reads      0
Pending writes: LRU 0, flush list 0, single page 0
Pages made young 30, not young 0
0.00 youngs/s, 0.00 non-youngs/s
Pages read 1898, created 191, written 22293
0.00 reads/s, 0.00 creates/s, 0.00 writes/s
Buffer pool hit rate 1000 / 1000, young-making rate 0 / 1000 not 0 / 1000
Pages read ahead 0.00/s, evicted without access 0.00/s, Random read ahead 0.00/s
LRU len: 2089, unzip_LRU len: 0
I/O sum[0]:cur[0], unzip sum[0]:cur[0]
---BUFFER POOL 6
Buffer pool size   32768
Free buffers       29928
Database pages     2532
Old database pages 923
Modified db pages  0
Pending reads      0
Pending writes: LRU 0, flush list 0, single page 0
Pages made young 15, not young 0
0.00 youngs/s, 0.00 non-youngs/s
Pages read 2359, created 173, written 22873
0.00 reads/s, 0.00 creates/s, 0.00 writes/s
Buffer pool hit rate 1000 / 1000, young-making rate 0 / 1000 not 0 / 1000
Pages read ahead 0.00/s, evicted without access 0.00/s, Random read ahead 0.00/s
LRU len: 2532, unzip_LRU len: 0
I/O sum[0]:cur[0], unzip sum[0]:cur[0]
---BUFFER POOL 7
Buffer pool size   32768
Free buffers       30183
Database pages     2271
Old database pages 846
Modified db pages  0
Pending reads      0
Pending writes: LRU 0, flush list 0, single page 0
Pages made young 17, not young 0
0.00 youngs/s, 0.00 non-youngs/s
Pages read 2054, created 217, written 15982
0.00 reads/s, 0.00 creates/s, 0.00 writes/s
Buffer pool hit rate 1000 / 1000, young-making rate 0 / 1000 not 0 / 1000
Pages read ahead 0.00/s, evicted without access 0.00/s, Random read ahead 0.00/s
LRU len: 2271, unzip_LRU len: 0
I/O sum[0]:cur[0], unzip sum[0]:cur[0]
--------------
ROW OPERATIONS
--------------
2 queries inside InnoDB, 0 queries in queue
2 read views open inside InnoDB
Process ID=1, Main thread ID=140527097956096, state: sleeping
Number of rows inserted 739677, updated 27824, deleted 36669, read 4585088689036
0.00 inserts/s, 0.00 updates/s, 0.00 deletes/s, 1468883.39 reads/s
----------------------------
END OF INNODB MONITOR OUTPUT
============================



```



## 解决问题流程


### 问题原因

在表结果中，存在user_id和period_id两个普通索引。
update语句中where条件同时使用了这两个普通索引。
mysql在自身SQL优化过程中，进行了index_merge操作，导致不同update语句执行时，加锁顺序不一致，导致死锁等待情况。


### 解决方案

简单粗暴，删除其中的period_id索引。


## 问题总结

业务数据库设计与业务逻辑之间的对应关系需要及时回顾复盘，并进行迭代优化。


## 参考文献

- https://blog.csdn.net/kamactor/article/details/106382271
- https://blog.csdn.net/lzxlfly/article/details/104872176
